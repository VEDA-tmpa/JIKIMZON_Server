# StorageManager Test Scenarios - Test 3

`StorageManager` 클래스의 추가 동작 및 개선된 기능을 테스트하기 위한 시나리오입니다. 이번 테스트는 **쓰기 위치 관리**와 **디스크 오버플로 처리**를 포함한 새로운 동작을 확인합니다.

---

## 주요 변경점
- **쓰기 위치 관리 (`mCurrentWriteOffset`)**:
  - 프레임 저장 시 현재 쓰기 위치를 저장하고 관리합니다.
  - 디스크의 끝에 도달하면 처음부터 데이터를 덮어쓰기 시작합니다.
- **디스크 오버플로 처리**:
  - 디스크의 크기를 초과할 경우, 새로운 데이터를 저장하면서 기존 데이터를 덮어씁니다.
- **패딩 처리 제거**:
  - 기존의 패딩을 사용하여 디스크 크기를 맞추는 대신, 디스크 내 쓰기 위치를 관리합니다.
  
---

## 1. 디스크 오버플로 테스트
### **설명**:
디스크 크기 제한을 초과할 때 기존 데이터를 덮어쓰는 동작을 확인합니다.

### **테스트 절차**:
1. 디스크 크기 제한(예: `1000 bytes`)을 설정합니다.
2. 여러 프레임을 저장하여 디스크 크기를 초과하도록 설정합니다.
3. 저장된 데이터의 첫 번째 프레임이 덮어씌워지는지 확인합니다.

### **기대 결과**:
- 디스크의 끝에 도달하면 새 데이터를 처음부터 덮어쓰기 시작합니다.
- `"Disk full, wrapping around to overwrite from the beginning."` 메시지가 로그에 기록됩니다.
- `video.bin` 파일에 마지막 프레임들이 저장됩니다.

---

## 2. 쓰기 위치 관리 테스트
### **설명**:
프레임 저장 시 쓰기 위치가 올바르게 관리되는지 확인합니다.

### **테스트 절차**:
1. 프레임 크기를 확인하여 디스크 내 위치가 올바르게 이동하는지 검증합니다.
2. 모든 프레임 저장 후 `mCurrentWriteOffset` 값이 정확한지 확인합니다.

### **기대 결과**:
- 각 프레임이 `mCurrentWriteOffset`에 따라 올바른 위치에 저장됩니다.
- 디스크 끝에 도달한 경우 쓰기 위치가 처음으로 리셋됩니다.

---

## 3. 디스크 크기 초과 예외 처리 제거
### **설명**:
이전 테스트에서는 디스크 크기를 초과할 경우 예외를 발생시켰지만, 이번 테스트에서는 기존 데이터를 덮어쓰도록 변경된 동작을 확인합니다.

### **테스트 절차**:
1. 디스크 크기 제한을 초과하는 데이터를 저장합니다.
2. 프로그램 실행이 중단되지 않고 정상적으로 작동하는지 확인합니다.

### **기대 결과**:
- 예외가 발생하지 않고 데이터가 덮어씌워지며 저장됩니다.
- `"Frame saved successfully."` 메시지가 정상적으로 출력됩니다.

---

## 주요 로그 메시지
- **디스크 오버플로**:

## test_2와의 차이점
1. **쓰기 위치 관리 (`mCurrentWriteOffset`)**:
 - `test_2`는 디스크 전체를 재작성하며 패딩을 추가했지만, `test_3`에서는 현재 쓰기 위치만 관리합니다.
 - 디스크 끝에 도달하면 데이터는 처음부터 덮어쓰기 시작합니다.

2. **디스크 크기 초과 시 동작**:
 - `test_2`에서는 초과 데이터를 저장하지 않았으며, 패딩을 추가하여 파일 크기를 고정했습니다.
 - `test_3`에서는 디스크 크기를 초과하면 데이터가 기존 데이터를 덮어씁니다.

3. **패딩 처리 제거**:
 - `test_2`는 디스크 크기를 맞추기 위해 파일 끝에 `0x00` 패딩을 추가했습니다.
 - `test_3`에서는 패딩을 제거하고 쓰기 위치만 관리합니다.

---

## 참고 사항
- 파일(`video.bin`)의 내용을 확인하여 프레임이 올바르게 저장되고 덮어씌워졌는지 검증하세요.
- 디스크 끝에 도달한 경우 쓰기 위치가 처음으로 이동하는지 확인하세요.
- 이번 테스트는 디스크 크기를 고정하지 않고, 쓰기 위치 관리와 데이터 덮어쓰기를 중심으로 작동합니다.
